     1                                  ;           p1q1.asm
     2                                  ;
     3                                  ;           RUN:      Linux
     4                                  ;           ASSEMBLE: nasm -l p1q1.lst -f elf p1q1.asm
     5                                  ;           LINK:     ld -m elf_i386 -o p1q1 p1q1.o
     6                                  ;
     7                                  ;
     8                                  
     9                                  ; Equivalent statements
    10                                  
    11                                  ; Data segment
    12                                  SECTION .data
    13 00000000 0000                    sum: dw 0
    14                                  
    15                                  ; Un-initialized data segment
    16                                  SECTION .bss
    17                                  
    18                                  ; Code segment
    19                                  SECTION .text
    20                                  GLOBAL _function1
    21                                  
    22                                  _function1:
    23                                  	; Just some random code
    24                                  
    25 00000000 55                      	push ebp
    26 00000001 89E5                    	mov ebp, esp
    27                                  	
    28 00000003 8B7508                  	mov esi, [ebp + 8]
    29 00000006 8B7D0C                  	mov edi, [ebp + 12]
    30                                  
    31 00000009 B95D000000              	mov ecx, 0000005Dh ; 93 decimal
    32                                  
    33 0000000E 66B80000                	mov ax, 0h
    34 00000012 8A06                    	mov al, [esi]
    35 00000014 6698                    	cbw
    36 00000016 6689C3                  	mov bx, ax
    37 00000019 8A4601                  	mov al, byte [esi + 1]
    38 0000001C 6698                    	cbw
    39 0000001E 6601C3                  	add bx, ax
    40 00000021 8A4602                  	mov al, byte [esi + 2]
    41 00000024 6698                    	cbw
    42 00000026 6601C3                  	add bx, ax
    43 00000029 8A4603                  	mov al, byte [esi + 3]
    44 0000002C 6698                    	cbw
    45 0000002E 6601C3                  	add bx, ax
    46 00000031 8A4604                  	mov al, byte [esi + 4]
    47 00000034 6698                    	cbw
    48 00000036 6601C3                  	add bx, ax
    49 00000039 8A4605                  	mov al, byte [esi + 5]
    50 0000003C 6698                    	cbw
    51 0000003E 6601C3                  	add bx, ax
    52 00000041 8A4606                  	mov al, byte [esi + 6]
    53 00000044 6698                    	cbw
    54 00000046 6601C3                  	add bx, ax
    55                                  
    56                                  .loop:
    57 00000049 8A4607                  	mov al, byte [esi + 7]
    58 0000004C 6698                    	cbw
    59 0000004E 6601D8                  	add ax, bx
    60 00000051 6689C2                  	mov dx, ax
    61                                  
    62 00000054 B308                    	mov bl, 08h
    63 00000056 F6FB                    	idiv bl
    64 00000058 6698                    	cbw
    65 0000005A 6689470E                	mov [edi + 14], ax
    66                                  
    67 0000005E 6689D3                  	mov bx, dx
    68 00000061 8A06                    	mov al, byte [esi]
    69 00000063 6698                    	cbw
    70 00000065 6629C3                  	sub bx, ax
    71                                  
    72 00000068 46                      	inc esi
    73 00000069 47                      	inc edi
    74 0000006A 47                      	inc edi
    75 0000006B E0DC                    	loopnz .loop
    76                                  
    77                                  	; Return
    78 0000006D 5D                      	pop ebp
    79 0000006E C3                      	ret
